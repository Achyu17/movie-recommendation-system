<button class="back-btn" (click)="goBack()">⬅ Back</button>
<!-- <button class="logout-btn" (click)="logout()">Logout</button> -->
<div class="details-page" *ngIf="movie">

  <!-- ✅ TOP SECTION -->
  <div class="details-card">

    <!-- POSTER -->
    <div class="poster">
      <img [src]="movie.poster_url || 'assets/posters/no-poster.jpg'" alt="{{ movie.title }}" />
    </div>

    <!-- INFO -->
    <div class="info">
      <h2>{{ movie.title }}</h2>

      <p><b>Genre:</b> {{ movie.genre }}</p>
      <p><b>Language:</b> {{ movie.language }}</p>
      <p><b>Director:</b> {{ movie.director }}</p>
      <p><b>Cast:</b> {{ movie.cast }}</p>

      <div class="rating">
        ⭐ {{ movie.average_rating || 'No ratings yet' }}
      </div>

      <p class="description">
        {{ movie.description }}
      </p>

      <!-- ACTIONS -->
      <div class="actions">
        <button (click)="toggleRating()">Rate Movie</button>
        <button (click)="loadRecommendations()">Get Recommendations</button>
      </div>
    </div>
  </div>

  <!-- ✅ RATE SECTION -->
  <div class="rate-section" *ngIf="showRating">
    <h3>Rate this movie</h3>

    <div class="stars">
      <span *ngFor="let star of [1,2,3,4,5]" (click)="selectRating(star)" [class.active]="star <= selectedRating">
        ★
      </span>
    </div>

    <button class="submit-btn" [disabled]="selectedRating === 0" (click)="submitRating()">
      Submit Rating
    </button>
  </div>

  <!-- ✅ RECOMMENDATIONS -->
  <div class="recommend-section" *ngIf="recommendations?.length">
    <h3>Recommended based on this movie</h3>


    <div class="rec-grid">
      <div class="rec-card" *ngFor="let rec of recommendations">
        <img [src]="rec.poster_url ? rec.poster_url : defaultPoster" alt="{{ rec.title }}" loading="lazy"
          referrerpolicy="no-referrer" />
        <p>{{ rec.title }}</p>
      </div>
    </div>
  </div>

</div>